<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://portals-labs.github.io/portals-sdk/portals-sdk.js?v=100239"></script>
  <meta charset="UTF-8" />
  <title>Cancel Run Button</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      /* keep page background transparent so semi-transparency is visible */
      background: transparent;
      font-family: Faro, sans-serif;
    }

    .cancel-button {
      /* pill shape whose width is defined by its text */
      padding: 10px 26px;
      border-radius: 999px;
      cursor: pointer;

      /* semi-transparent fill like the toolbar example */
      background: rgba(39, 52, 79, 0.65); /* dark bluish, 65% opaque */
      border: 1px solid rgba(15, 23, 42, 0.9);

      color: #f9fbff;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.09em;
      text-align: center;

      display: inline-flex;
      align-items: center;
      justify-content: center;
      white-space: nowrap; /* keep text on one line */

      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.45);
      backdrop-filter: blur(2px); /* subtle glassy effect when supported */
    }

    .cancel-button span {
      line-height: 1.1;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
    }

    .cancel-button:hover {
      background: rgba(46, 61, 92, 0.75);
      box-shadow: 0 8px 22px rgba(0, 0, 0, 0.55);
      transform: translateY(-1px);
    }

    .cancel-button:active {
      background: rgba(32, 44, 67, 0.8);
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.45);
      transform: translateY(1px);
    }
  </style>
</head>
<body>
  <button class="cancel-button" onclick="cancelRun()" aria-label="Cancel run">
    <span>Cancel Run</span>
  </button>

  <script>
      function onPageLoad() {
        PortalsSdk.focusGameKeyboard()
      }

      document.addEventListener('DOMContentLoaded', onPageLoad);
    
      function sendMessage(taskName, targetState) {
        const message = {
          TaskName: taskName,
          TaskTargetState: targetState
        };
          PortalsSdk.sendMessageToUnity(JSON.stringify(message));
      }

      window.onload = () => {
        sendMessage("my-task", "SetActiveToCompleted");
      };

      function closeIframe() {
        PortalsSdk.closeIframe();
      }
      function cancelRun() {
        sendMessage('cancelTimers', 'SetActiveToNotActive');
        PortalsSdk.focusGameKeyboard()
        closeIframe();
    }
  </script>
</body>
</html>
